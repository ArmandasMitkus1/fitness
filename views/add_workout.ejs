<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head') %>
</head>
<body>
    <%- include('partials/header') %>
    <main>
        <h2>Log a New Workout</h2>

        <% if (errors.length > 0) { %>
            <div class="error-container">
                <p>Please fix the following errors:</p>
                <ul>
                    <% errors.forEach(error => { %>
                        <li><%= error.msg %></li>
                    <% }) %>
                </ul>
            </div>
        <% } %>

        <form action="/add-workout" method="POST" class="data-form">
            <label for="workout_date">Date:</label>
            <input type="date" id="workout_date" name="workout_date" 
                   value="<%= formData.workout_date || new Date().toISOString().substring(0, 10) %>" required>

            <label for="workout_type">Workout Type:</label>
            <select id="workout_type" name="workout_type" required>
                <option value="" disabled <%= !formData.workout_type ? 'selected' : '' %>>-- Select Type --</option>
                <option value="Running" <%= formData.workout_type === 'Running' ? 'selected' : '' %>>Running</option>
                <option value="Cycling" <%= formData.workout_type === 'Cycling' ? 'selected' : '' %>>Cycling</option>
                <option value="Lifting" <%= formData.workout_type === 'Lifting' ? 'selected' : '' %>>Weight Lifting</option>
                <option value="Yoga" <%= formData.workout_type === 'Yoga' ? 'selected' : '' %>>Yoga</option>
                <option value="Other" <%= formData.workout_type === 'Other' ? 'selected' : '' %>>Other</option>
            </select>

            <label for="duration_minutes">Duration (minutes):</label>
            <input type="number" id="duration_minutes" name="duration_minutes" placeholder="e.g., 45" 
                   value="<%= formData.duration_minutes || '' %>" required min="1">

            <label for="calories_burned">Calories Burned (kcal):</label>
            <input type="number" id="calories_burned" name="calories_burned" placeholder="Optional, e.g., 350" 
                   value="<%= formData.calories_burned || '' %>" min="0">

            <button type="submit">Log Workout</button>
        </form>
    </main>
    <%- include('partials/footer') %>
</body>
</html>
